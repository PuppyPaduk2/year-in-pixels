include ../../Page/Template.jade

block headBefore
   +routepage()

   //- Палитра
   if $paletteJSON
      script !{"window.palette = " . $paletteJSON . ";"}

   // Данные о днях
   if $days
      script !{"window.days = " . $days . ";"}

   // Данное пользователя
   if $user
      script !{"window.user = " . json_encode($user) . ";"}

block body
   .content
      .top
         .name-project="Year in pixels"
         .navigation
            .button(data-type="link", name="palette")="Palette"
            .button(data-type="link", name="menu")="Menu"
      .center
         .table(data-show="true")
            .names-months
               .day-marker-block
               each $nameMonth, $key in $namesMonths
                  .name-month.day-marker-block=$nameMonth
            .days
               .days-month
                  - $index = 0;
                  while $index < 31
                     .day-number.day-marker-block= $index + 1;
                     - $index++;
               - $monthIndex = 0;

               $indexDay

               while $monthIndex < 12
                  .days-month
                     - $index = 0;
                     while $index < 31
                        - $date = $getDate($year, $monthIndex + 1, $index + 1);
                        .day-marker(title=$date, data-date=$date, style=$dayColor($palette[$daysByDates[$date]["status"]]["color"]))
                        - $index++;
                  - $monthIndex++;
      .bottom